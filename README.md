# kaggle Optiver - Trading at the Close

Optiver - Trading at the Closeã‚³ãƒ³ãƒšã®ãƒªãƒã‚¸ãƒˆãƒª

- result
  - public: â—â—
    - rank: â—â—/â—â—
  - private: â—â—
    - rank: â—â—/â—â—

## Overview

### ç«¶æŠ€ã®ç›®çš„

ã“ã®ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ã¯ã€æ³¨æ–‡å¸³ç°¿ã¨çµ‚å€¤ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã€ãƒŠã‚¹ãƒ€ãƒƒã‚¯ä¸Šå ´éŠ˜æŸ„ã®çµ‚å€¤ã®å‹•ãã‚’äºˆæ¸¬ã§ãã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã«æŒ‘æˆ¦ã—ã¾ã™ã€‚ã€€ã€€
ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®æƒ…å ±ã¯ã€ä¾¡æ ¼ã®èª¿æ•´ã€éœ€çµ¦ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®è©•ä¾¡ã€å–å¼•æ©Ÿä¼šã®ç‰¹å®šã«ä½¿ç”¨ã§ãã¾ã™ã€‚

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ã€€è¨¼åˆ¸å–å¼•æ‰€ã¯ã€ä¸€åˆ»ã‚’äº‰ã†ãƒã‚¤ãƒšãƒ¼ã‚¹ãªç’°å¢ƒã§ã‚ã‚‹ã€‚ä¸€æ—¥ã®å–å¼•ãŒçµ‚ã‚ã‚Šã«è¿‘ã¥ãã«ã¤ã‚Œã€ãã®æ¿€ã—ã•ã¯ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆã—ã€æœ€å¾Œã®10åˆ†é–“ãŒãƒ”ãƒ¼ã‚¯ã¨ãªã‚‹ã€‚ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®é«˜ã¾ã‚Šã¨æ€¥æ¿€ãªä¾¡æ ¼å¤‰å‹•ãŒç‰¹å¾´çš„ãªã“ã®ç¬é–“ã¯ã€ãã®æ—¥ã®ä¸–ç•ŒçµŒæ¸ˆã®ã‚·ãƒŠãƒªã‚ªã‚’å½¢æˆã™ã‚‹ä¸Šã§æ¥µã‚ã¦é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚ã€€ã€€ãƒŠã‚¹ãƒ€ãƒƒã‚¯è¨¼åˆ¸å–å¼•æ‰€ã®å„å–å¼•æ—¥ã¯ã€ãƒŠã‚¹ãƒ€ãƒƒã‚¯ã®ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã§çµ‚äº†ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã£ã¦ã€å–å¼•æ‰€ã«ä¸Šå ´ã—ã¦ã„ã‚‹è¨¼åˆ¸ã®å…¬å¼ãªçµ‚å€¤ãŒæ±ºå®šã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®çµ‚å€¤ã¯ã€æŠ•è³‡å®¶ã€ã‚¢ãƒŠãƒªã‚¹ãƒˆã€ãã®ä»–ã®å¸‚å ´å‚åŠ è€…ã«ã¨ã£ã¦ã€å€‹ã€…ã®è¨¼åˆ¸ã‚„å¸‚å ´å…¨ä½“ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã™ã‚‹ä¸Šã§é‡è¦ãªæŒ‡æ¨™ã¨ãªã‚Šã¾ã™ã€‚ã€€ã€€
ã€€ã“ã®è¤‡é›‘ãªé‡‘èæƒ…å‹¢ã®ä¸­ã§ã€ä¸–ç•Œã‚’ãƒªãƒ¼ãƒ‰ã™ã‚‹é›»å­ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ã§ã‚ã‚‹ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ¼ã¯æ´»å‹•ã—ã¦ã„ã¾ã™ã€‚æŠ€è¡“é©æ–°ã‚’åŸå‹•åŠ›ã¨ã—ã¦ã€ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ¼ã¯ã€ãƒ‡ãƒªãƒãƒ†ã‚£ãƒ–ã€ç¾ç‰©æ ªå¼ã€ETFã€å‚µåˆ¸ã€å¤–è²¨ãªã©ã®è†¨å¤§ãªé‡‘èå•†å“ã‚’å–å¼•ã—ã€ä¸–ç•Œã®ä¸»è¦å–å¼•æ‰€ã«ãŠã„ã¦ã€ä½•åƒã‚‚ã®ã“ã‚Œã‚‰ã®å•†å“ã«ç«¶äº‰åŠ›ã®ã‚ã‚‹ä¸¡å»ºã¦ä¾¡æ ¼ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã€€ã€€
ã€€ãƒŠã‚¹ãƒ€ãƒƒã‚¯å–å¼•æ‰€ã®å–å¼•ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ€å¾Œã®10åˆ†é–“ã«ã€ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ¼ã®ã‚ˆã†ãªãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼ã¯å¾“æ¥ã®ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ–ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¨ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ãƒ–ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã—ã¾ã™ã€‚ä¸¡ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®æƒ…å ±ã‚’çµ±åˆã™ã‚‹ã“ã®èƒ½åŠ›ã¯ã€ã™ã¹ã¦ã®å¸‚å ´å‚åŠ è€…ã«æœ€è‰¯ã®ä¾¡æ ¼ã‚’æä¾›ã™ã‚‹ãŸã‚ã«ä¸å¯æ¬ ã§ã™ã€‚ã€€ã€€
ã€€ã“ã®ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ–ãƒƒã‚¯ã¨ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã®çµ‚å€¤ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã€ãƒŠã‚¹ãƒ€ãƒƒã‚¯ä¸Šå ´éŠ˜æŸ„ã®çµ‚å€¤ã®å‹•ãã‚’äºˆæ¸¬ã§ãã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®æƒ…å ±ã¯ã€ä¾¡æ ¼ã®èª¿æ•´ã€éœ€çµ¦ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®è©•ä¾¡ã€å–å¼•æ©Ÿä¼šã®ç‰¹å®šã«åˆ©ç”¨ã§ãã¾ã™ã€‚ã€€ã€€
ã€€ã‚ãªãŸã®ãƒ¢ãƒ‡ãƒ«ã¯ã€ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã¨ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ–ãƒƒã‚¯ã‹ã‚‰ã®ã‚·ã‚°ãƒŠãƒ«ã®çµ±åˆã«è²¢çŒ®ã—ã€ç‰¹ã«å–å¼•ã®æœ€å¾Œã®10åˆ†é–“ã®æ¿€ã—ã„å‹•ãã«ãŠã„ã¦ã€å¸‚å ´ã®åŠ¹ç‡ã¨ã‚¢ã‚¯ã‚»ã‚¹ã®æ”¹å–„ã«ã¤ãªãŒã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ¼ã®ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã€ã‚¯ã‚ªãƒ³ãƒ„ãƒ»ãƒªã‚µãƒ¼ãƒãƒ£ãƒ¼ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç›´é¢ã™ã‚‹ã‚ˆã†ãªã€ç¾å®Ÿä¸–ç•Œã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã®å•é¡Œã‚’æ‰±ã†å®Ÿä½“é¨“ã‚‚å¾—ã‚‰ã‚Œã¾ã™ã€‚ã€€ã€€

### Submit

æå‡ºç‰©ã¯ã€äºˆæ¸¬ãƒªã‚¿ãƒ¼ãƒ³ã¨è¦³æ¸¬ã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã®é–“ã®å¹³å‡çµ¶å¯¾èª¤å·®ï¼ˆMAEï¼‰ã§è©•ä¾¡ã•ã‚Œã‚‹ã€‚è¨ˆç®—å¼ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ï¼š

$$ ğ‘€ğ´ğ¸=1/ğ‘›âˆ‘ğ‘–=1ğ‘›ğ‘¦ğ‘–-ğ‘¥ğ‘–| ğ‘€ğ‘¥ğ‘¦ $$

ã“ã“ã§
n ã¯ãƒ‡ãƒ¼ã‚¿ç‚¹ã®ç·æ•°ã€‚
y_i ã¯ãƒ‡ãƒ¼ã‚¿ç‚¹ i ã®äºˆæ¸¬å€¤ã€‚
x_i ã¯ãƒ‡ãƒ¼ã‚¿ç‚¹ i ã®è¦³æ¸¬å€¤ã€‚
å¿œå‹Ÿ
ã“ã®ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã¯ã€æä¾›ã•ã‚Œã¦ã„ã‚‹ python ã®æ™‚ç³»åˆ— API ã‚’ä½¿ã£ã¦æå‡ºã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚APIã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ã“ã®ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å¾“ã£ã¦ãã ã•ã„ã€‚.5,0.5

## Timeline

- 2023å¹´5æœˆ11æ—¥ - é–‹å§‹æ—¥
- 2023å¹´8æœˆ3æ—¥ -ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç· åˆ‡ã€‚å‡ºå ´ã™ã‚‹ã«ã¯ã€ã“ã®æ—¥ã¾ã§ã«ç«¶æŠ€è¦å‰‡ã«åŒæ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- 2023å¹´8æœˆ3æ—¥ - ãƒãƒ¼ãƒ åˆä½µã®ç· åˆ‡æ—¥ã€‚ã“ã®æ—¥ãŒã€å‚åŠ è€…ãŒãƒãƒ¼ãƒ ã«å‚åŠ ã—ãŸã‚Šåˆä½µã—ãŸã‚Šã§ãã‚‹æœ€å¾Œã®æ—¥ã§ã™
- 2023å¹´8æœˆ10æ—¥ - æœ€çµ‚æå‡ºç· åˆ‡æ—¥ã€‚

## Data

ç«¶æŠ€ãƒ‡ãƒ¼ã‚¿ã¯ã€3ã¤ã®å¹´é½¢é–¢é€£ç–¾æ‚£ã«é–¢é€£ã™ã‚‹50ä»¥ä¸Šã®åŒ¿ååŒ–ã•ã‚ŒãŸå¥åº·ç‰¹æ€§ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ç›®æ¨™ã¯ã€è¢«é¨“è€…ãŒã“ã‚Œã‚‰ã®ç–¾æ‚£ã®ã„ãšã‚Œã‹ã«ç½¹ã£ã¦ã„ã‚‹ã‹ã„ãªã„ã‹ã‚’äºˆæ¸¬ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ï¼ˆäºŒå€¤åˆ†é¡å•é¡Œï¼‰ã€‚

ãªãŠã€ã“ã‚Œã¯ã‚³ãƒ¼ãƒ‰ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã¯éš ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ã€è§£ç­”ã‚’ä½œæˆã™ã‚‹ã®ã«å½¹ç«‹ã¤ã‚ˆã†ã«ã€æ­£ã—ã„å½¢å¼ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ã„ãã¤ã‹æä¾›ã—ã¾ã™ã€‚ã‚ãªãŸã®æå‡ºç‰©ãŒæ¡ç‚¹ã•ã‚Œã‚‹ã¨ãã€ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚å®Œå…¨ãªãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã«ã¯ã€ç´„400è¡ŒãŒã‚ã‚Šã¾ã™ã€‚

- **train.csv**Â - The training set.
- **test.csv**Â - The test set.
- **greeks.csv** - è£œè¶³çš„ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒãƒˆã§ã®ã¿åˆ©ç”¨å¯èƒ½ã€‚
- **sample_submission.csv**

### train.csv

|ã‚«ãƒ©ãƒ å|èª¬æ˜|
|----|---- |
|id| å„ã‚ªãƒ–ã‚¶ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€æ„ãªè­˜åˆ¥å­|
|AB-GL|56å€‹ã®åŒ¿ååŒ–ã•ã‚ŒãŸå¥åº·ç‰¹æ€§ã€‚EJã¯ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§ã‚ã‚‹ãŒã€ãã‚Œä»¥å¤–ã¯ã™ã¹ã¦æ•°å€¤ã§ã‚ã‚‹ã€‚|
|class|ãƒã‚¤ãƒŠãƒªã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼š1ã¯ã€è¢«é¨“è€…ãŒ3ã¤ã®æ¡ä»¶ã®ã†ã¡ã®1ã¤ã¨è¨ºæ–­ã•ã‚ŒãŸã“ã¨ã‚’ç¤ºã—ã€0ã¯ã€è¨ºæ–­ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã™|

### greek.csv

|ã‚«ãƒ©ãƒ å|èª¬æ˜|
|----|---- |
|Alpha|å¹´é½¢ã«é–¢é€£ã™ã‚‹çŠ¶æ…‹ãŒã‚ã‚‹å ´åˆã€ãã®ç¨®é¡ã‚’ç‰¹å®šã™ã‚‹ã€‚|
|A|å¹´é½¢ã«é–¢é€£ã—ãŸçŠ¶æ…‹ã¯ãªã„ã€‚ã‚¯ãƒ©ã‚¹0ã«å¯¾å¿œã™ã‚‹ã€‚|
|B, D, G|3ã¤ã®åŠ é½¢ã«é–¢é€£ã—ãŸçŠ¶æ…‹ã€‚ã‚¯ãƒ©ã‚¹ 1 ã«å¯¾å¿œã™ã‚‹ã€‚|
|Beta, Gamma, Delta|3ã¤ã®å®Ÿé¨“ç‰¹æ€§ã‚’ç¤ºã™ã€‚|
|Epsilon|ã“ã®è¢«é¨“è€…ã®ãƒ‡ãƒ¼ã‚¿ãŒåé›†ã•ã‚ŒãŸæ—¥ä»˜ã€‚ãªãŠã€ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã™ã¹ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒãƒˆãŒåé›†ã•ã‚ŒãŸå¾Œã«åé›†ã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ã€‚|

## å‚è€ƒ

|notebook|èª¬æ˜|
|---|---|
|[ICR IARC EDA Ensemble and Stacking baseline](https://www.kaggle.com/code/tetsutani/icr-iarc-eda-ensemble-and-stacking-baseline)|ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ï¼ˆä»®ï¼‰|
|[ICR - EDA & Balanced Learning with LGBM & XGB](https://www.kaggle.com/code/mateuszk013/icr-eda-balanced-learning-with-lgbm-xgb)|EDAå‚è€ƒ|
|[icr-identify-age](https://www.kaggle.com/code/vadimkamaev/icr-identify-age)|Tabpfnã‚’ç”¨ã„ãŸãƒãƒ¼ãƒˆ, LBä¸Šä½ (0.11)ã¯ã“ã®TabPFNä½¿ç”¨ã—ã¦ã„ã‚‹|

## NOTE

### nb

|notebook|CV|PV|èª¬æ˜|
|---|---|---|---|
|kg-nb_ICR_001|0.13968 Â± 0.08848|0.28|[ICR IARC EDA_Ensemble and Stacking baseline](https://www.kaggle.com/code/tetsutani/icr-iarc-eda-ensemble-and-stacking-baseline) ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½œæˆ|
|kg-nb_ICR_002|56.3||001ãƒ™ãƒ¼ã‚¹ã€ä¸­èº«ã®èª¬æ˜è¿½åŠ |

### EXP

|notebook|CV|PV|èª¬æ˜|
|---|---|---|---|
|kg-nb_ICR_exp_001||0.23|kg-nb_ICR_001ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€EDAç”¨ã®ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ä½œæˆ|
|kg-nb_ICR_exp_002|-|-|é£›ã³ç•ªå·|
|kg-nb_ICR_exp_003|0.18385 Â± 0.06902|0.40|001ãƒ™ãƒ¼ã‚¹ã€drop columnå¤‰æ›´, EDAå‰Šé™¤|
|kg-nb_ICR_exp_004|||[icr-identify-age](https://www.kaggle.com/code/vadimkamaev/icr-identify-age) ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½œæˆ, |
|kg-nb_ICR_exp_005_ver1|||003ãƒ™ãƒ¼ã‚¹, `drop_cols` =['BC', 'CL','BZ','DV']|
|kg-nb_ICR_exp_005_ver2||| `drop_cols` =['BC', 'CL','BZ','DV','AR]|
|kg-nb_ICR_exp_005_ver3|||ver2ã®è¨­å®šã®ã¾ã¾early_stopping_rounds = 1000 -> 10000,Early_stoppingã«ä¼´ã†ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒƒãƒˆã‚’æ¤œè¨¼
|
early_stopping_rounds = 100000|

## LOG

1920
